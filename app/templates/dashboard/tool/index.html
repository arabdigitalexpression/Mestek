{% extends 'dashboard/base.html' %} {% block title %} اﻷدوات {% endblock %} {%
block heading %} اﻷدوات {% endblock %}{% block content %}

<div class="table-responsive">
	<form action="{{ url_for('tool_list') }}" method="post">
		<table class="table table-striped table-hover table-sm">
			<thead>
				<tr>
					<th scope="col">#</th>
					<th scope="col">إسم اﻷداة</th>
					<th scope="col">قيمة الحجز</th>
					<th scope="col">مشرف؟</th>
					<th scope="col">المساحة</th>
					<th scope="col"></th>
				</tr>
			</thead>
			<tbody>
				{% for tool in tools %}
				{% if loop.index <= j and loop.index >= i%}
				<tr>
					<td>{{loop.index }}</td>
					<td>{{tool.name}}</td>
					<td>{{tool.price}} جم / اليوم</td>
					<td>
						{% if tool.has_operator %}
						<i class="bi bi-check2-circle text-success"></i> {% else %}
						<i class="bi bi-x-circle text-danger"></i> {% endif %}
					</td>
					<td>
						{% if tool.space.name %} {{tool.space.name}} {% else %}
						<span class="text-muted">لا يوجد</span> {% endif %}
					</td>
					<td class="d-flex">
						<button type="button" class="btn btn-info text-white btn-sm mx-1 rounded-circle">
							<i class="bi bi-info-circle"></i>
						</button>
						<a href="{{url_for('update_tool', id=tool.id)}}"
							class="text-white btn btn-warning btn-sm mx-1 rounded-circle">
							<i class="bi bi-pencil"></i>
						</a>
						<form method="POST" action="{{url_for('delete_tool', id=tool.id)}}">
							<button type="button" class="text-white btn btn-danger btn-sm mx-1 rounded-circle"
								data-bs-toggle="modal" data-bs-target="#deleteModal-{{tool.id}}"
								data-bs-toggle="tooltip" data-bs-placement="top" title="حذف">
								<i class="bi bi-trash3"></i>
							</button>
							<div class="modal fade" id="deleteModal-{{tool.id}}" tabindex="-1"
								aria-labelledby="deleteModalLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="deleteModalLabel">حذف!</h5>
											<button type="button" class="btn-close" data-bs-dismiss="modal"
												aria-label="Close"></button>
										</div>
										<div class="modal-body">
											هل أنت متأكد من حذف مساحة: {{tool.name}}
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-outline-secondary"
												data-bs-dismiss="modal">
												رجوع
											</button>
											<button type="submit" class="btn btn-danger">
												تأكيد الحذف
											</button>
										</div>
									</div>
								</div>
							</div>
						</form>
					</td>
				</tr>
				{% endif %}
				{% endfor %}
			</tbody>
		</table>
		<nav aria-label="Page navigation example" class="d-flex float-end">
			<ul class="pagination ">
				<li class="page-item"><button class="page-link" name="Previous" value="Previous"
						type="submit">Previous</button></li>
				{% for page in range(1 , pages+1) %}
				<li class="page-item"><button class="page-link" name="b" value="{{page}}">{{page}}</button></li>
				{% endfor %}
				<li class="page-item"><button class="page-link" name="next" value="next">next</button></li>
			</ul>
		</nav>
	</form>
</div>
{% endblock %}
